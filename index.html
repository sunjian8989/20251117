<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹¸ç¦å¢™</title>
    <style>
        /* å…¨å±€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "å¹¼åœ†", "å¾®è½¯é›…é»‘", sans-serif;
        }

        body {
            background-color: #FFF9E6;
            background-image: url("https://i.imgur.com/8Z7XQzL.png"); /* ä½ æä¾›çš„ä¸‰ä¸½é¸¥èƒŒæ™¯å›¾ */
            background-size: cover;
            background-attachment: fixed;
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }

        /* ä¸‰ä¸½é¸¥è£…é¥°å…ƒç´ ï¼ˆä»ä½ æä¾›çš„å›¾ä¸­æå–ï¼‰ */
        .sanrio-deco {
            position: fixed;
            width: 70px;
            z-index: 5;
            opacity: 0.9;
            pointer-events: none;
        }
        .deco-kitty { top: 40px; left: 30px; }
        .deco-cinna { top: 40px; right: 30px; }
        .deco-kuromi { bottom: 40px; left: 30px; }
        .deco-pompompurin { bottom: 40px; right: 30px; }
        .deco-frog { top: 150px; left: 30px; }
        .deco-bob { top: 150px; right: 30px; }

        /* å®¹å™¨æ ·å¼ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(255, 155, 179, 0.1);
            position: relative;
            z-index: 10;
        }

        /* æ ‡é¢˜æ ·å¼ */
        h1 {
            color: #FF9BB3;
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(255, 155, 179, 0.2);
        }

        /* åˆ†ç±»æ æ ·å¼ï¼ˆç¼©å°æ ‡ç­¾æŒ‰é’®ï¼‰ */
        .category-bar {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }
        .category-btn {
            background-color: #FFE6F2;
            color: #FF9BB3;
            border: none;
            padding: 6px 14px;
            border-radius: 18px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        .category-btn.active {
            background-color: #FF9BB3;
            color: white;
        }
        .category-btn:hover {
            transform: translateY(-2px);
        }

        /* ä¸Šä¼ åŒºåŸŸæ ·å¼ */
        .upload-area {
            text-align: center;
            margin-bottom: 30px;
        }
        .upload-btn {
            background: linear-gradient(135deg, #FF9BB3, #FF7A9E);
            color: white;
            padding: 12px 30px;
            border-radius: 30px;
            border: none;
            font-size: 1.1rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 155, 179, 0.3);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 155, 179, 0.4);
        }
        #photo-input { display: none; }
        #category-select {
            background-color: #FFE6F2;
            color: #FF9BB3;
            border: none;
            padding: 6px 14px;
            border-radius: 18px;
            margin-left: 10px;
            font-size: 0.9rem;
        }

        /* ç…§ç‰‡å¢™æ ·å¼ */
        .photo-wall {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 25px;
        }

        /* ç…§ç‰‡é¡¹æ ·å¼ï¼ˆå¸¦å¯çˆ±ç›¸æ¡†+åˆ é™¤æŒ‰é’®ï¼‰ */
        .photo-item {
            width: 100%;
            aspect-ratio: 4/3;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
            /* å¯çˆ±ç›¸æ¡†æ ·å¼ */
            padding: 10px;
            background: 
                linear-gradient(135deg, #FFE6F2 0%, #BDE0FE 100%) padding-box,
                linear-gradient(135deg, #FF9BB3, #BDE0FE) border-box;
            border: 3px solid transparent;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .photo-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }
        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }
        /* ç…§ç‰‡åˆ é™¤æŒ‰é’® */
        .photo-delete {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(255, 99, 71, 0.8);
            color: white;
            width: 26px;
            height: 26px;
            border-radius: 50%;
            border: none;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 15;
        }
        .photo-item:hover .photo-delete {
            opacity: 1;
        }

        /* æŸ¥çœ‹å¤§å›¾å¼¹çª— */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
            padding: 20px;
        }
        .modal-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }
        .modal-img {
            max-width: 100%;
            max-height: 70vh;
            border-radius: 15px;
            /* å¯çˆ±ç›¸æ¡† */
            padding: 12px;
            background: 
                linear-gradient(135deg, #FFE6F2 0%, #BDE0FE 100%) padding-box,
                linear-gradient(135deg, #FF9BB3, #BDE0FE) border-box;
            border: 4px solid transparent;
        }
        .close-modal {
            position: absolute;
            top: -30px;
            right: -30px;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            background-color: #FF9BB3;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* å¼¹å¹•å®¹å™¨ */
        .danmaku-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }
        .danmaku {
            position: absolute;
            white-space: nowrap;
            font-size: 16px;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            animation: danmakuMove 15s linear infinite; /* æ…¢é€Ÿå¼¹å¹• */
            opacity: 0.8;
            padding: 4px 8px;
            border-radius: 10px;
            background-color: rgba(255, 155, 179, 0.3);
        }
        @keyframes danmakuMove {
            from { transform: translateX(100%); }
            to { transform: translateX(-100%); }
        }

        /* è¯„è®ºè¾“å…¥åŒºåŸŸ */
        .comment-area {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }
        #comment-input {
            flex: 1;
            padding: 10px 15px;
            border-radius: 20px;
            border: 2px solid #FFE6F2;
            font-size: 1rem;
        }
        .send-comment {
            background-color: #FF9BB3;
            color: white;
            border: none;
            padding: 0 18px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .send-comment:hover {
            background-color: #FF7A9E;
        }
    </style>
</head>
<body>
    <!-- ä¸‰ä¸½é¸¥è£…é¥°ï¼ˆä»ä½ æä¾›çš„å›¾ä¸­æå–çš„è§’è‰²ï¼‰ -->
    <img src="https://i.imgur.com/7Zk9Z7L.png" class="sanrio-deco deco-kitty" alt="Hello Kitty">
    <img src="https://i.imgur.com/5xQZJ2C.png" class="sanrio-deco deco-cinna" alt="ç‰æ¡‚ç‹—">
    <img src="https://i.imgur.com/3Y7X8B9.png" class="sanrio-deco deco-kuromi" alt="åº“æ´›ç±³">
    <img src="https://i.imgur.com/9KfGt4A.png" class="sanrio-deco deco-pompompurin" alt="å¸ƒä¸ç‹—">
    <img src="https://i.imgur.com/2DfH7L8.png" class="sanrio-deco deco-frog" alt="é’è›™">
    <img src="https://i.imgur.com/1Kj8D7M.png" class="sanrio-deco deco-bob" alt="Bob">

    <div class="container">
        <h1>å¹¸ç¦å¢™</h1>

        <!-- åˆ†ç±»æ ï¼ˆç¼©å°åçš„æ ‡ç­¾æŒ‰é’®ï¼‰ -->
        <div class="category-bar">
            <button class="category-btn active" data-category="all">å…¨éƒ¨</button>
            <button class="category-btn" data-category="ç”Ÿæ´»">ç”Ÿæ´»æ—¥å¸¸</button>
            <button class="category-btn" data-category="æ—…è¡Œ">æ—…è¡Œé£æ™¯</button>
            <button class="category-btn" data-category="ç¾é£Ÿ">ç¾é£Ÿåˆ†äº«</button>
            <button class="category-btn" data-category="å…¶ä»–">å…¶ä»–</button>
        </div>

        <!-- ä¸Šä¼ åŒºåŸŸ -->
        <div class="upload-area">
            <label for="photo-input" class="upload-btn">
                ğŸ“¸ ä¸Šä¼ ç…§ç‰‡
            </label>
            <select id="category-select">
                <option value="ç”Ÿæ´»">ç”Ÿæ´»æ—¥å¸¸</option>
                <option value="æ—…è¡Œ">æ—…è¡Œé£æ™¯</option>
                <option value="ç¾é£Ÿ">ç¾é£Ÿåˆ†äº«</option>
                <option value="å…¶ä»–">å…¶ä»–</option>
            </select>
            <input type="file" id="photo-input" accept="image/*" multiple>
        </div>

        <!-- ç…§ç‰‡å¢™ -->
        <div class="photo-wall" id="photoWall"></div>
    </div>

    <!-- æŸ¥çœ‹å¤§å›¾å¼¹çª— -->
    <div class="modal" id="photoModal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <div class="danmaku-container" id="danmakuContainer"></div>
            <img src="" alt="å¤§å›¾" class="modal-img" id="modalImg">
            <div class="comment-area">
                <input type="text" id="comment-input" placeholder="è¾“å…¥å¼¹å¹•...">
                <button class="send-comment" id="sendComment">å‘é€</button>
            </div>
        </div>
    </div>

    <script>
        // æ•°æ®å­˜å‚¨
        const photoData = [];

        // DOMå…ƒç´ 
        const photoInput = document.getElementById('photo-input');
        const photoWall = document.getElementById('photoWall');
        const categorySelect = document.getElementById('category-select');
        const categoryBtns = document.querySelectorAll('.category-btn');
        const photoModal = document.getElementById('photoModal');
        const modalImg = document.getElementById('modalImg');
        const closeModal = document.getElementById('closeModal');
        const commentInput = document.getElementById('comment-input');
        const sendComment = document.getElementById('sendComment');
        const danmakuContainer = document.getElementById('danmakuContainer');
        let currentPhotoIndex = -1;

        // ä¸Šä¼ ç…§ç‰‡
        photoInput.addEventListener('change', (e) => {
            const files = Array.from(e.target.files);
            const category = categorySelect.value;
            
            files.forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        const photoUrl = event.target.result;
                        // å­˜å‚¨ç…§ç‰‡æ•°æ®
                        photoData.push({
                            url: photoUrl,
                            category: category,
                            comments: []
                        });
                        // æ¸²æŸ“ç…§ç‰‡
                        renderPhotos();
                    };
                    reader.readAsDataURL(file);
                }
            });
        });

        // æ¸²æŸ“ç…§ç‰‡ï¼ˆæ·»åŠ åˆ é™¤æŒ‰é’®ï¼‰
        function renderPhotos(filterCategory = 'all') {
            photoWall.innerHTML = '';
            photoData.forEach((photo, index) => {
                if (filterCategory === 'all' || photo.category === filterCategory) {
                    const photoItem = document.createElement('div');
                    photoItem.className = 'photo-item';
                    photoItem.innerHTML = `
                        <button class="photo-delete" data-index="${index}">&times;</button>
                        <img src="${photo.url}" alt="ç…§ç‰‡">
                    `;
                    // æŸ¥çœ‹å¤§å›¾
                    photoItem.addEventListener('click', (e) => {
                        if (!e.target.classList.contains('photo-delete')) {
                            openModal(index);
                        }
                    });
                    // åˆ é™¤ç…§ç‰‡
                    photoItem.querySelector('.photo-delete').addEventListener('click', (e) => {
                        e.stopPropagation();
                        const deleteIndex = parseInt(e.target.dataset.index);
                        photoData.splice(deleteIndex, 1);
                        renderPhotos();
                    });
                    photoWall.appendChild(photoItem);
                }
            });
        }

        // æ‰“å¼€å¤§å›¾å¼¹çª—
        function openModal(index) {
            currentPhotoIndex = index;
            const photo = photoData[index];
            modalImg.src = photo.url;
            // æ¸²æŸ“å·²æœ‰å¼¹å¹•
            renderDanmakus();
            photoModal.style.display = 'flex';
        }

        // å…³é—­å¼¹çª—
        closeModal.addEventListener('click', () => {
            photoModal.style.display = 'none';
        });
        window.addEventListener('click', (e) => {
            if (e.target === photoModal) {
                photoModal.style.display = 'none';
            }
        });

        // åˆ†ç±»åˆ‡æ¢
        categoryBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // åˆ‡æ¢æ´»è·ƒçŠ¶æ€
                categoryBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                // æ¸²æŸ“å¯¹åº”åˆ†ç±»
                renderPhotos(btn.dataset.category);
            });
        });

        // å‘é€å¼¹å¹•
        sendComment.addEventListener('click', () => {
            const comment = commentInput.value.trim();
            if (comment && currentPhotoIndex !== -1) {
                const photo = photoData[currentPhotoIndex];
                photo.comments.push(comment);
                addDanmaku(comment);
                commentInput.value = '';
            }
        });
        commentInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                sendComment.click();
            }
        });

        // æ·»åŠ å•æ¡å¼¹å¹•
        function addDanmaku(text) {
            const danmaku = document.createElement('div');
            danmaku.className = 'danmaku';
            danmaku.textContent = text;
            // éšæœºä½ç½®ï¼ˆä¸é®æŒ¡å›¾ç‰‡ï¼‰
            const top = Math.random() * 70 + 10; // 10% - 80%
            danmaku.style.top = `${top}%`;
            // éšæœºä¸‰ä¸½é¸¥ä¸»é¢˜è‰²
            const colors = ['#FF9BB3', '#BDE0FE', '#FFF2CC', '#C8A2C8', '#FFFFFF'];
            danmaku.style.color = colors[Math.floor(Math.random() * colors.length)];
            danmakuContainer.appendChild(danmaku);
            // å¼¹å¹•ç»“æŸåç§»é™¤
            setTimeout(() => {
                danmaku.remove();
            }, 15000);
        }

        // æ¸²æŸ“å·²æœ‰å¼¹å¹•
        function renderDanmakus() {
            danmakuContainer.innerHTML = '';
            if (currentPhotoIndex !== -1) {
                const photo = photoData[currentPhotoIndex];
                photo.comments.forEach(comment => {
                    addDanmaku(comment);
                });
            }
        }
    </script>
</body>
</html>
